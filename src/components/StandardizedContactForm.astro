---
// Enhanced Standardized Contact Form Component with all required dropdowns
interface Props {
  source: string;
  title?: string;
  description?: string;
  warehouseProperty?: string;
  className?: string;
  showWarehouseSelect?: boolean;
  warehouses?: Array<{title: string, slug: string}>;
  isModal?: boolean;
}

const { 
  source, 
  title = "Get Matched With Warehouses", 
  description = "Tell us what you need and we'll send qualified options.",
  warehouseProperty = "",
  className = "",
  showWarehouseSelect = true,
  warehouses = [],
  isModal = false
} = Astro.props;

// Get all warehouses for the dropdown if not provided
let allWarehouses = warehouses;
if (showWarehouseSelect && allWarehouses.length === 0) {
  try {
    const { getCollection } = await import('astro:content');
    const warehouseCollection = await getCollection('warehouses');
    allWarehouses = warehouseCollection
      .filter(w => w.data.availability === 'available')
      .map(w => ({ title: w.data.title, slug: w.data.slug }));
  } catch (error) {
    console.log('Could not load warehouses for dropdown');
  }
}

// South Florida counties
const counties = [
  'Miami-Dade County',
  'Broward County', 
  'Palm Beach County'
];

// Price range options
const priceRanges = [
  '$3-5 per SF',
  '$5-7 per SF',
  '$7-10 per SF',
  '$10-15 per SF',
  '$15+ per SF',
  'Negotiable'
];

// Square footage options
const sqftRanges = [
  '500-2,000 SF',
  '2,000-5,000 SF',
  '5,000-10,000 SF',
  '10,000-25,000 SF',
  '25,000-50,000 SF',
  '50,000-100,000 SF',
  '100,000+ SF'
];
---

<div class={`bg-white rounded-3xl p-8 shadow-lg border border-gray-200 ${className}`}>
  {title && (
    <div class="text-center mb-6">
      <h2 class="text-2xl font-bold text-gray-900 mb-2">{title}</h2>
      {description && <p class="text-gray-600">{description}</p>}
    </div>
  )}

  <!-- Contact Info Display -->
  <div class="bg-gray-50 rounded-2xl p-6 mb-6">
    <div class="grid md:grid-cols-2 gap-4">
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center">
          <svg class="w-6 h-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
          </svg>
        </div>
        <div>
          <div class="font-semibold text-gray-900">Call Now</div>
          <a href="tel:954-937-9667" class="text-primary-600 hover:text-primary-700 font-medium">
            (954) 937-9667
          </a>
        </div>
      </div>
      
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center">
          <svg class="w-6 h-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
          </svg>
        </div>
        <div>
          <div class="font-semibold text-gray-900">Email Us</div>
          <a href="mailto:info@warehouselocating.com" class="text-primary-600 hover:text-primary-700 font-medium text-sm">
            info@warehouselocating.com
          </a>
        </div>
      </div>
    </div>
  </div>
  
  <form 
    name="warehouse-inquiry-standardized" 
    method="POST" 
    data-netlify="true" 
    netlify-honeypot="bot-field"
    action="/success"
    class="space-y-6"
  >
    <!-- Hidden fields -->
    <input type="hidden" name="form-name" value="warehouse-inquiry-standardized" />
    <input type="hidden" name="source" value={source} />
    {warehouseProperty && <input type="hidden" name="property-preselected" value={warehouseProperty} />}
    <div class="hidden">
      <input name="bot-field" />
    </div>

    <!-- Name & Email Row -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label for="name" class="block text-sm font-semibold text-gray-700 mb-2">
          Name *
        </label>
        <input 
          type="text" 
          id="name" 
          name="name" 
          required 
          class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-300"
          placeholder="Your Name"
        />
      </div>
      <div>
        <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
          Email *
        </label>
        <input 
          type="email" 
          id="email" 
          name="email" 
          required 
          class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-300"
          placeholder="your@email.com"
        />
      </div>
    </div>

    <!-- Phone & Company Row -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label for="phone" class="block text-sm font-semibold text-gray-700 mb-2">
          Phone
        </label>
        <input 
          type="tel" 
          id="phone" 
          name="phone" 
          class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-300"
          placeholder="(555) 123-4567"
        />
      </div>
      <div>
        <label for="company" class="block text-sm font-semibold text-gray-700 mb-2">
          Company
        </label>
        <input 
          type="text" 
          id="company" 
          name="company" 
          class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-300"
          placeholder="Company Name"
        />
      </div>
    </div>

    <!-- Property Interest & County Row -->
    <div class="grid md:grid-cols-2 gap-4">
      {showWarehouseSelect && (
        <div>
          <label for="property-interest" class="block text-sm font-semibold text-gray-700 mb-2">
            Property Interest *
          </label>
          <select 
            id="property-interest" 
            name="property-interest" 
            required
            class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-300"
          >
            <option value="">Select property...</option>
            <option value="any">Any Available Property</option>
            <optgroup label="Specific Properties">
              {allWarehouses.map(warehouse => (
                <option value={warehouse.slug} selected={warehouseProperty === warehouse.slug}>
                  {warehouse.title}
                </option>
              ))}
            </optgroup>
          </select>
        </div>
      )}

      <div>
        <label for="county" class="block text-sm font-semibold text-gray-700 mb-2">
          Preferred County
        </label>
        <select 
          id="county" 
          name="county" 
          class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-300"
        >
          <option value="">Select county...</option>
          <option value="any">Any County</option>
          {counties.map(county => (
            <option value={county}>{county}</option>
          ))}
        </select>
      </div>
    </div>

    <!-- Size & Price Range Row -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label for="size-needed" class="block text-sm font-semibold text-gray-700 mb-2">
          Size Needed (SF)
        </label>
        <select 
          id="size-needed" 
          name="size-needed" 
          class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-300"
        >
          <option value="">Select size range...</option>
          {sqftRanges.map(range => (
            <option value={range}>{range}</option>
          ))}
        </select>
      </div>

      <div>
        <label for="price-range" class="block text-sm font-semibold text-gray-700 mb-2">
          Price Range (per SF/year)
        </label>
        <select 
          id="price-range" 
          name="price-range" 
          class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-300"
        >
          <option value="">Select price range...</option>
          {priceRanges.map(range => (
            <option value={range}>{range}</option>
          ))}
        </select>
      </div>
    </div>

    <!-- Timing -->
    <div>
      <label for="timing" class="block text-sm font-semibold text-gray-700 mb-2">
        Timing
      </label>
      <select 
        id="timing" 
        name="timing" 
        class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-300"
      >
        <option value="">Select timeline...</option>
        <option value="immediate">Immediate (0-30 days)</option>
        <option value="1-3-months">1-3 months</option>
        <option value="3-6-months">3-6 months</option>
        <option value="6-12-months">6-12 months</option>
        <option value="12-months-plus">12+ months</option>
        <option value="just-exploring">Just exploring options</option>
      </select>
    </div>

    <!-- Requirements & Message -->
    <div>
      <label for="requirements" class="block text-sm font-semibold text-gray-700 mb-2">
        Requirements & Message
      </label>
      <textarea 
        id="requirements" 
        name="requirements" 
        rows="4"
        class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-300 resize-vertical"
        placeholder="Tell us about your specific requirements: loading docks, clear height, special features, budget, location preferences, etc."
      ></textarea>
    </div>

    <!-- Submit Button -->
    <button 
      type="submit" 
      class="w-full bg-gradient-to-r from-primary-600 to-primary-700 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:from-primary-700 hover:to-primary-800 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 transform focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"
    >
      Get Matched With Warehouses
    </button>

    <p class="text-sm text-gray-500 text-center">
      Free service • Landlords pay our fees • No obligation
    </p>
  </form>
</div>