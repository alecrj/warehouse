---
// Updated homepage with perfect desktop above-the-fold + original mobile layout
import BaseLayout from '../layouts/BaseLayout.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';
import { getCollection } from 'astro:content';

// Define proper types
interface WarehouseData {
  title: string;
  location: string;
  price: string;
  size: number;
  description: string;
  images?: string[];
  features?: string[];
  featured?: boolean;
  availability?: string;
  slug: string;
}

interface Warehouse {
  data: WarehouseData;
}

// Get warehouse data for stats and featured properties
let allWarehouses: Warehouse[] = [];
let availableWarehouses: Warehouse[] = [];
let featuredWarehouses: Warehouse[] = [];
let totalSqFt = 0;
let averageSize = 0;

try {
  allWarehouses = await getCollection('warehouses');
  availableWarehouses = allWarehouses.filter((w: Warehouse) => w.data.availability === 'available');
  featuredWarehouses = allWarehouses.filter((w: Warehouse) => w.data.featured).slice(0, 3);
  totalSqFt = allWarehouses.reduce((sum: number, w: Warehouse) => sum + (w.data.size || 0), 0);
  averageSize = allWarehouses.length > 0 ? Math.round(totalSqFt / allWarehouses.length) : 0;
} catch (error) {
  console.log('No warehouse data yet:', error);
}

// Form dropdown options (matching ContactModal exactly)
const counties = [
  'Miami-Dade County',
  'Broward County', 
  'Palm Beach County'
];

const priceRanges = [
  '$3-5 per SF',
  '$5-7 per SF',
  '$7-10 per SF',
  '$10-15 per SF',
  '$15+ per SF',
  'Negotiable'
];

const sqftRanges = [
  '500-2,000 SF',
  '2,000-5,000 SF',
  '5,000-10,000 SF',
  '10,000-25,000 SF',
  '25,000-50,000 SF',
  '50,000-100,000 SF',
  '100,000+ SF'
];
---

<BaseLayout 
  title="Find Your Perfect Warehouse in South Florida | Warehouse Locating"
  description="Free tenant representation for warehouse leasesâ€”landlords pay our fee. From 500 SF to 500,000 SF across Miami-Dade, Broward, and Palm Beach."
>
  <Navigation />
  
  <main>
    <!-- Enhanced Hero Section - Full Screen -->
    <section class="hero-section relative bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 overflow-hidden flex items-center">
      <!-- Background Elements -->
      <div class="absolute inset-0">
